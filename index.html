<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>LonelyLessAustralia Decision Aid</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <!-- Styles: LonelyLessAustralia premium theme -->
    <link rel="stylesheet" href="styles.css">

    <!-- Chart.js -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.1/dist/chart.umd.min.js"></script>
    <!-- jsPDF -->
    <script src="https://cdn.jsdelivr.net/npm/jspdf@2.5.1/dist/jspdf.umd.min.js"></script>
    <!-- SheetJS for Excel export -->
    <script src="https://cdn.jsdelivr.net/npm/xlsx@0.18.5/dist/xlsx.full.min.js"></script>
</head>
<body>
    <header class="app-header">
        <div class="app-header-main">
            <div>
                <h1 class="app-title">LonelyLessAustralia Decision Aid</h1>
                <p class="app-subtitle">
                    Policy decision aid to evaluate loneliness support programmes for older adults in Australia
                    using Discrete Choice Experiment evidence and cost–benefit analysis.
                </p>
            </div>
            <div class="app-header-badges">
                <span class="badge badge-primary">DCE-based</span>
                <span class="badge badge-muted">Policy tool</span>
            </div>
        </div>
    </header>

    <!-- Main layout -->
    <div class="app-layout">
        <!-- Navigation: reduced number of tabs -->
        <nav class="app-nav" aria-label="Main navigation">
            <button class="nav-tab active" data-tab-target="overview">Overview</button>
            <button class="nav-tab" data-tab-target="scenario-costs">Scenario and costs</button>
            <button class="nav-tab" data-tab-target="benefits-results">Benefits and results</button>
            <button class="nav-tab" data-tab-target="export-assumptions">Export and assumptions</button>
        </nav>

        <!-- Content panes -->
        <main class="app-content">
            <!-- ========== TAB 1: OVERVIEW ========== -->
            <section class="tab-panel active" id="tab-overview" data-tab="overview">
                <div class="panel-grid">
                    <section class="card card-main">
                        <h2>What this tool does</h2>
                        <p>
                            The LonelyLessAustralia Decision Aid helps you compare alternative support
                            programmes for reducing loneliness among older adults in Australia. The tool combines
                            Discrete Choice Experiment estimates on programme preferences with costing inputs and
                            cost of living multipliers to predict programme uptake, estimate per-session willingness
                            to pay, and calculate net benefits for selected target populations.
                        </p>
                        <p>
                            Use the <strong>Scenario and costs</strong> tab to define programme features, target
                            cohorts, and cost assumptions. Then review <strong>Benefits and results</strong> to see
                            uptake predictions, DCE-based benefit measures, and cost–benefit summaries, and use
                            <strong>Export and assumptions</strong> to generate a PDF or Excel summary for reports
                            and stakeholder discussions.
                        </p>
                    </section>

                    <section class="card card-summary">
                        <h2>Key summary indicators</h2>
                        <div class="summary-grid">
                            <div class="summary-item">
                                <div class="summary-label">Predicted programme uptake</div>
                                <div class="summary-value">
                                    <span id="summary-uptake">–</span>
                                    <span class="summary-unit">%</span>
                                </div>
                                <div class="summary-note">Share of eligible older adults expected to enrol.</div>
                            </div>
                            <div class="summary-item">
                                <div class="summary-label">DCE-based benefit per participant</div>
                                <div class="summary-value">
                                    <span class="summary-currency">A$</span>
                                    <span id="summary-benefit-per-participant">–</span>
                                    <span class="summary-unit">/session</span>
                                </div>
                                <div class="summary-note">
                                    Implied per-session willingness to pay from the DCE.
                                </div>
                            </div>
                            <div class="summary-item">
                                <div class="summary-label">Net benefit, all cohorts</div>
                                <div class="summary-value">
                                    <span class="summary-currency">A$</span>
                                    <span id="summary-net-benefit-all">–</span>
                                    <span class="summary-unit">million</span>
                                </div>
                                <div class="summary-note">
                                    Total DCE-based benefits minus total economic costs.
                                </div>
                            </div>
                        </div>
                    </section>

                    <section class="card card-context">
                        <h2>Current scenario at a glance</h2>
                        <div class="context-grid">
                            <div class="context-item">
                                <div class="context-label">Target cohort size</div>
                                <div class="context-value">
                                    <span id="context-cohort-size">–</span>
                                    <span class="context-unit">older adults</span>
                                </div>
                            </div>
                            <div class="context-item">
                                <div class="context-label">Cost per session</div>
                                <div class="context-value">
                                    <span class="context-currency">A$</span>
                                    <span id="context-cost-per-session">–</span>
                                </div>
                            </div>
                            <div class="context-item">
                                <div class="context-label">Cost of living multiplier</div>
                                <div class="context-value">
                                    <span id="context-col-multiplier">–</span>
                                </div>
                            </div>
                            <div class="context-item">
                                <div class="context-label">Session format</div>
                                <div class="context-value" id="context-session-format">–</div>
                            </div>
                        </div>
                        <p class="context-note">
                            These values update automatically as you modify programme assumptions in the Scenario
                            and costs tab.
                        </p>
                    </section>
                </div>
            </section>

            <!-- ========== TAB 2: SCENARIO AND COSTS ========== -->
            <section class="tab-panel" id="tab-scenario-costs" data-tab="scenario-costs">
                <div class="panel-grid panel-two-column">
                    <!-- Left: Programme configuration (attributes from DCE) -->
                    <section class="card card-main">
                        <div class="card-header-inline">
                            <h2>Programme scenario</h2>
                            <button type="button" class="btn btn-ghost btn-sm" id="btn-load-example-scenario">
                                Load example scenario
                            </button>
                        </div>
                        <p>
                            Select the programme features for the loneliness support option you would like to
                            evaluate. Attribute options and levels are derived from the LonelyLessAustralia DCE.
                        </p>

                        <!-- Dynamic attribute controls populated from configuration in script.js -->
                        <div id="attribute-controls" class="form-grid" aria-live="polite">
                            <!-- JS will render all DCE attribute selectors here -->
                        </div>

                        <hr class="divider">

                        <h3>Cost per session</h3>
                        <p>
                            Specify the economic cost per participant per session. This cost will be used together
                            with the target cohort size and the number of sessions to calculate total programme
                            costs.
                        </p>

                        <div class="cost-input-row">
                            <label for="input-cost-per-session" class="form-label">
                                Cost per participant per session (A$)
                            </label>
                            <div class="cost-slider-group">
                                <input
                                    id="input-cost-per-session"
                                    type="range"
                                    min="0"
                                    max="100"
                                    step="1"
                                    value="40"
                                >
                                <div class="cost-slider-value">
                                    <span class="currency">A$</span>
                                    <span id="display-cost-per-session">40</span>
                                </div>
                            </div>
                        </div>

                        <div class="form-grid">
                            <div class="form-group">
                                <label for="input-number-of-sessions" class="form-label">
                                    Number of programme sessions per participant
                                </label>
                                <input
                                    id="input-number-of-sessions"
                                    type="number"
                                    min="1"
                                    step="1"
                                    value="8"
                                    class="form-control"
                                >
                            </div>
                            <div class="form-group">
                                <label for="input-target-cohort" class="form-label">
                                    Target cohort size (number of older adults)
                                </label>
                                <input
                                    id="input-target-cohort"
                                    type="number"
                                    min="1"
                                    step="1"
                                    value="1000"
                                    class="form-control"
                                >
                            </div>
                        </div>
                    </section>

                    <!-- Right: Cost of living and economic costing -->
                    <section class="card card-secondary">
                        <h2>Cost of living and economic costing</h2>
                        <p>
                            Adjust programme costs using cost of living multipliers for different Australian
                            settings. These multipliers are applied to the base cost per session to reflect local
                            conditions.
                        </p>

                        <div class="form-group">
                            <label for="select-col-region" class="form-label">
                                Cost of living setting
                            </label>
                            <select id="select-col-region" class="form-control">
                                <!-- Options populated from configuration in script.js -->
                            </select>
                        </div>

                        <table class="table table-compact" id="table-col-multipliers">
                            <thead>
                                <tr>
                                    <th>Setting</th>
                                    <th>Multiplier</th>
                                    <th>Notes</th>
                                </tr>
                            </thead>
                            <tbody>
                                <!-- JS populates rows based on configuration -->
                            </tbody>
                        </table>

                        <hr class="divider">

                        <h3>Cost breakdown</h3>
                        <p>
                            The table below summarises total economic costs for the current scenario, incorporating
                            the cost of living multiplier and the selected cohort size.
                        </p>

                        <table class="table" id="table-cost-summary">
                            <thead>
                                <tr>
                                    <th>Component</th>
                                    <th>Value</th>
                                    <th>Unit</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>Base cost per session</td>
                                    <td><span id="cost-summary-base-session">–</span></td>
                                    <td>A$ per participant</td>
                                </tr>
                                <tr>
                                    <td>Adjusted cost per session</td>
                                    <td><span id="cost-summary-adjusted-session">–</span></td>
                                    <td>A$ per participant</td>
                                </tr>
                                <tr>
                                    <td>Total economic cost, all cohorts</td>
                                    <td><span id="cost-summary-total-all">–</span></td>
                                    <td>A$ million</td>
                                </tr>
                            </tbody>
                        </table>

                        <button type="button" class="btn btn-primary" id="btn-update-scenario">
                            Update scenario
                        </button>
                    </section>
                </div>
            </section>

            <!-- ========== TAB 3: BENEFITS AND RESULTS ========== -->
            <section class="tab-panel" id="tab-benefits-results" data-tab="benefits-results">
                <div class="panel-grid panel-two-column">
                    <!-- Left: DCE-based benefits and uptake -->
                    <section class="card card-main">
                        <h2>DCE-based benefits and uptake</h2>
                        <p>
                            The DCE results are used to translate the selected programme attributes into predicted
                            uptake and per-session benefits. This section reports endorsement rates and DCE-based
                            willingness to pay per session.
                        </p>

                        <table class="table" id="table-dce-benefits">
                            <thead>
                                <tr>
                                    <th>Outcome</th>
                                    <th>Value</th>
                                    <th>Unit</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>Predicted uptake</td>
                                    <td><span id="benefits-uptake">–</span></td>
                                    <td>% of target cohort</td>
                                </tr>
                                <tr>
                                    <td>Endorsed participants</td>
                                    <td><span id="benefits-endorsed-participants">–</span></td>
                                    <td>people</td>
                                </tr>
                                <tr>
                                    <td>Per-session DCE benefit</td>
                                    <td><span id="benefits-per-session">–</span></td>
                                    <td>A$ per participant per session</td>
                                </tr>
                                <tr>
                                    <td>Total DCE-based benefits</td>
                                    <td><span id="benefits-total-all">–</span></td>
                                    <td>A$ million</td>
                                </tr>
                            </tbody>
                        </table>

                        <h3>Uptake profile</h3>
                        <p>
                            The chart shows how predicted programme uptake changes when key programme features
                            or costs are varied within the observed range of the DCE.
                        </p>

                        <div class="chart-container">
                            <canvas id="chart-uptake-sensitivity" aria-label="Uptake sensitivity chart"></canvas>
                        </div>
                    </section>

                    <!-- Right: Cost–benefit and sensitivity -->
                    <section class="card card-secondary">
                        <h2>Cost–benefit summary and sensitivity</h2>
                        <p>
                            This summary compares total DCE-based benefits and total economic costs, and reports
                            net benefit for all cohorts. You can vary key assumptions to see how robust the
                            conclusions are.
                        </p>

                        <table class="table" id="table-cost-benefit">
                            <thead>
                                <tr>
                                    <th>Measure</th>
                                    <th>Value</th>
                                    <th>Unit</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>Total DCE-based benefits, all cohorts</td>
                                    <td><span id="cb-benefits-all">–</span></td>
                                    <td>A$ million</td>
                                </tr>
                                <tr>
                                    <td>Total economic cost, all cohorts</td>
                                    <td><span id="cb-costs-all">–</span></td>
                                    <td>A$ million</td>
                                </tr>
                                <tr>
                                    <td>Net benefit, all cohorts</td>
                                    <td><span id="cb-net-benefit-all">–</span></td>
                                    <td>A$ million</td>
                                </tr>
                                <tr>
                                    <td>Benefit–cost ratio</td>
                                    <td><span id="cb-bcr">–</span></td>
                                    <td>ratio</td>
                                </tr>
                            </tbody>
                        </table>

                        <hr class="divider">

                        <h3>Sensitivity sliders</h3>
                        <p>
                            Adjust key assumptions to explore sensitivity of net benefits to changes in costs
                            and programme reach.
                        </p>

                        <div class="form-group">
                            <label for="slider-sens-cost" class="form-label">
                                Cost per session sensitivity (% change)
                            </label>
                            <input
                                id="slider-sens-cost"
                                type="range"
                                min="-50"
                                max="50"
                                step="5"
                                value="0"
                            >
                            <div class="slider-caption">
                                <span id="label-sens-cost">0%</span>
                            </div>
                        </div>

                        <div class="form-group">
                            <label for="slider-sens-uptake" class="form-label">
                                Uptake sensitivity (% change)
                            </label>
                            <input
                                id="slider-sens-uptake"
                                type="range"
                                min="-30"
                                max="30"
                                step="5"
                                value="0"
                            >
                            <div class="slider-caption">
                                <span id="label-sens-uptake">0%</span>
                            </div>
                        </div>

                        <table class="table table-compact" id="table-sensitivity-results">
                            <thead>
                                <tr>
                                    <th>Scenario</th>
                                    <th>Net benefit</th>
                                    <th>Unit</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>Base case</td>
                                    <td><span id="sens-net-base">–</span></td>
                                    <td>A$ million</td>
                                </tr>
                                <tr>
                                    <td>With sensitivity adjustments</td>
                                    <td><span id="sens-net-adjusted">–</span></td>
                                    <td>A$ million</td>
                                </tr>
                            </tbody>
                        </table>
                    </section>
                </div>
            </section>

            <!-- ========== TAB 4: EXPORT AND ASSUMPTIONS ========== -->
            <section class="tab-panel" id="tab-export-assumptions" data-tab="export-assumptions">
                <div class="panel-grid">
                    <section class="card card-main">
                        <h2>Export options</h2>
                        <p>
                            Generate a concise summary of the current scenario, including programme attributes,
                            costing assumptions, DCE-based benefit estimates, and cost–benefit results. Use these
                            exports in reports, slides, or briefing notes.
                        </p>

                        <div class="export-buttons">
                            <button type="button" class="btn btn-primary" id="btn-export-pdf">
                                Download PDF summary
                            </button>
                            <button type="button" class="btn btn-secondary" id="btn-export-excel">
                                Download Excel summary
                            </button>
                        </div>

                        <hr class="divider">

                        <h3>Summary snapshot</h3>
                        <div class="export-preview" id="export-preview">
                            <!-- JS will populate a brief textual summary here for preview before export -->
                        </div>
                    </section>

                    <section class="card card-secondary">
                        <h2>Key assumptions and DCE inputs</h2>
                        <p>
                            This section documents the main assumptions used in the analyses and the key parameters
                            drawn from the LonelyLessAustralia DCE. These should be reviewed when interpreting
                            the results or updating the tool with new evidence.
                        </p>

                        <table class="table table-compact" id="table-assumptions">
                            <thead>
                                <tr>
                                    <th>Assumption</th>
                                    <th>Value</th>
                                    <th>Notes</th>
                                </tr>
                            </thead>
                            <tbody>
                                <!-- Populated by script.js using configuration -->
                            </tbody>
                        </table>

                        <h3>DCE parameter summary</h3>
                        <table class="table table-compact" id="table-dce-parameters">
                            <thead>
                                <tr>
                                    <th>Attribute / level</th>
                                    <th>Direction</th>
                                    <th>Relative strength</th>
                                </tr>
                            </thead>
                            <tbody>
                                <!-- Populated by script.js (no individual-level data, only summary) -->
                            </tbody>
                        </table>
                    </section>
                </div>
            </section>
        </main>
    </div>

    <footer class="app-footer">
        <p>
            LonelyLessAustralia Decision Aid · Prototype evaluation tool for loneliness interventions among
            older adults in Australia.
        </p>
    </footer>

    <!-- Main application script -->
    <script src="script.js"></script>
</body>
</html>
