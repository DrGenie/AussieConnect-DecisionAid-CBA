<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1.0" />
  <title>LonelyLessAustralia Decision Aid Tool</title>
  <link rel="stylesheet" href="styles.css" />
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" integrity="sha512-papNMzNnQn5iH+1G+FHu8SyuXHs6A1k+Ln7tK5qRo1l5eYm6Jzv+1pArJ7N4C9FfpRrmAgM3tYWd3FZ9jKz1Bw==" crossorigin="anonymous" referrerpolicy="no-referrer" />
  <!-- Chart.js Library -->
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <!-- jsPDF Library -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
</head>
<body>
  <div class="container">
    <header>
      <h1>LonelyLessAustralia Decision Aid Tool</h1>
    </header>

    <nav class="tabs" role="tablist">
      <button class="tablink active" role="tab" aria-selected="true" aria-controls="introTab" onclick="openTab('introTab', this)">
        <i class="fa-solid fa-info-circle"></i> Introduction
      </button>
      <button class="tablink" role="tab" aria-selected="false" aria-controls="instructionsTab" onclick="openTab('instructionsTab', this)">
        <i class="fa-solid fa-circle-question"></i> Instructions
      </button>
      <button class="tablink" role="tab" aria-selected="false" aria-controls="attributesTab" onclick="openTab('attributesTab', this)">
        <i class="fa-solid fa-list"></i> Attributes
      </button>
      <button class="tablink" role="tab" aria-selected="false" aria-controls="inputsTab" onclick="openTab('inputsTab', this)">
        <i class="fa-solid fa-sliders"></i> Inputs
      </button>
      <button class="tablink" role="tab" aria-selected="false" aria-controls="wtpTab" onclick="openTab('wtpTab', this)">
        <i class="fa-solid fa-chart-bar"></i> WTP Results
      </button>
      <button class="tablink" role="tab" aria-selected="false" aria-controls="probTab" onclick="openTab('probTab', this)">
        <i class="fa-solid fa-chart-line"></i> Programme Uptake
      </button>
      <button class="tablink" role="tab" aria-selected="false" aria-controls="costsTab" onclick="openTab('costsTab', this)">
        <i class="fa-solid fa-calculator"></i> Costs & Benefits
      </button>
      <button class="tablink" role="tab" aria-selected="false" aria-controls="scenariosTab" onclick="openTab('scenariosTab', this)">
        <i class="fa-solid fa-save"></i> Scenarios
      </button>
    </nav>

    <!-- Introduction Tab -->
    <section id="introTab" class="tabcontent" style="display: block;">
      <div class="card intro-box">
        <p>
          Loneliness affects over five million Australians, particularly older adults, resulting in significant health and economic challenges. This tool utilises discrete choice experiment (DCE) estimates to predict programme uptake probabilities, enabling personalised services based on the attributes older adults consider most crucial.
        </p>
        <p>Use the tabs above to navigate:</p>
        <ul>
          <li><strong>Instructions</strong> – Guidance for each tool feature.</li>
          <li><strong>Attributes</strong> – Detailed descriptions of the DCE attributes.</li>
          <li><strong>Inputs</strong> – Configure your scenario’s cost, accessibility, frequency, etc.</li>
          <li><strong>WTP Results</strong> – View charts of willingness to pay (A$) with error bars.</li>
          <li><strong>Programme Uptake</strong> – Dynamically computed chart based on your scenario inputs.</li>
          <li><strong>Costs & Benefits</strong> – Realistic cost items and QALY-based benefits.</li>
          <li><strong>Scenarios</strong> – Save, compare or export PDF-based results.</li>
        </ul>
      </div>
    </section>

    <!-- Instructions Tab -->
    <section id="instructionsTab" class="tabcontent">
      <div class="card">
        <h2>How to Use This Tool</h2>
        <ol>
          <li>Review the <strong>Attributes</strong> to understand cost, accessibility, frequency, method, duration, and support types. Hover over the icons for details.</li>
          <li>In <strong>Inputs</strong>, select your state, cost adjustments, and service options.</li>
          <li>Click “Calculate &amp; View Results” to compute and view cost-benefit analyses.</li>
          <li>The <strong>WTP Results</strong> tab displays bar charts of the main model’s willingness to pay (A$) per attribute.</li>
          <li>The <strong>Programme Uptake</strong> tab provides a dynamically updated chart based on your inputs.</li>
          <li>The <strong>Costs &amp; Benefits</strong> tab integrates detailed cost items and QALY benefits.</li>
          <li>Under <strong>Scenarios</strong>, save multiple configurations, compare them side by side, or export your results to PDF.</li>
        </ol>
      </div>
    </section>

    <!-- Attributes Tab -->
    <section id="attributesTab" class="tabcontent">
      <div class="card">
        <h2>Programme Attributes</h2>
        <ul class="attribute-list">
          <li>
            <i class="fa-solid fa-dollar-sign tooltip" data-tooltip="The fee (AUD) participants pay per session."></i>
            <strong>Cost per session:</strong> Out-of-pocket fee per attendance.
          </li>
          <li>
            <i class="fa-solid fa-location-dot tooltip" data-tooltip="Local (up to 12 km) vs wider community (50+ km) affects convenience and transport costs."></i>
            <strong>Accessibility:</strong> Local vs wider community.
          </li>
          <li>
            <i class="fa-solid fa-calendar-check tooltip" data-tooltip="Weekly interactions increase social engagement frequency compared to monthly."></i>
            <strong>Frequency of Interaction:</strong> Weekly or monthly.
          </li>
          <li>
            <i class="fa-solid fa-video tooltip" data-tooltip="Virtual or hybrid delivery based on user preferences and mobility."></i>
            <strong>Method of Interaction:</strong> Virtual or hybrid (in-person &amp; virtual).
          </li>
          <li>
            <i class="fa-solid fa-clock tooltip" data-tooltip="Session length influences scheduling and depth of interaction."></i>
            <strong>Duration of Interaction:</strong> 2-hour or 4-hour sessions.
          </li>
          <li>
            <i class="fa-solid fa-hands-helping tooltip" data-tooltip="Choose the support programme: community, counselling, or VR-based."></i>
            <strong>Type of Support Programme:</strong> Community engagement, psychological counselling, or virtual reality.
          </li>
        </ul>
      </div>
    </section>

    <!-- Inputs Tab -->
    <section id="inputsTab" class="tabcontent">
      <div class="card">
        <h2>Programme Inputs</h2>
        <p>Configure your scenario then click “Calculate &amp; View Results”.</p>
        <form onsubmit="event.preventDefault();">
          <div class="form-grid">
            <div class="form-item">
              <label for="state_select">State:</label>
              <select id="state_select">
                <option value="">None</option>
                <option value="NSW">New South Wales (NSW)</option>
                <option value="VIC">Victoria (VIC)</option>
                <option value="QLD">Queensland (QLD)</option>
                <option value="WA">Western Australia (WA)</option>
                <option value="SA">South Australia (SA)</option>
                <option value="TAS">Tasmania (TAS)</option>
                <option value="ACT">Australian Capital Territory (ACT)</option>
                <option value="NT">Northern Territory (NT)</option>
              </select>
              <label for="adjustCosts">Adjust for Cost of Living?</label>
              <select id="adjustCosts">
                <option value="no">No</option>
                <option value="yes">Yes</option>
              </select>
            </div>
            <div class="form-item">
              <label for="costSlider">
                Cost per Session (AUD): <span id="costLabel">50</span>
              </label>
              <input type="range" id="costSlider" min="0" max="100" step="1" value="50" oninput="updateCostDisplay(this.value)" />
            </div>
            <div class="form-item">
              <label>
                <input type="checkbox" id="localCheck" /> Local Area (12 km)
              </label>
              <label>
                <input type="checkbox" id="widerCheck" /> Wider Community (50+ km)
              </label>
            </div>
            <div class="form-item">
              <label>
                <input type="checkbox" id="weeklyCheck" /> Weekly
              </label>
              <label>
                <input type="checkbox" id="monthlyCheck" /> Monthly
              </label>
            </div>
            <div class="form-item">
              <label>
                <input type="checkbox" id="virtualCheck" /> Virtual
              </label>
              <label>
                <input type="checkbox" id="hybridCheck" /> Hybrid (In-person &amp; Virtual)
              </label>
            </div>
            <div class="form-item">
              <label>
                <input type="checkbox" id="twoHCheck" /> 2-hour Interaction
              </label>
              <label>
                <input type="checkbox" id="fourHCheck" /> 4-hour Interaction
              </label>
            </div>
            <div class="form-item">
              <label>
                <input type="checkbox" id="commCheck" /> Community Engagement
              </label>
              <label>
                <input type="checkbox" id="psychCheck" /> Psychological Counselling
              </label>
              <label>
                <input type="checkbox" id="vrCheck" /> Virtual Reality
              </label>
            </div>
          </div>
          <div class="buttons-row">
            <button type="button" onclick="openSingleScenario()">Calculate &amp; View Results</button>
          </div>
        </form>
      </div>
    </section>

    <!-- WTP Results Tab -->
    <section id="wtpTab" class="tabcontent">
      <div class="card">
        <h2>Willingness to Pay (WTP) Results</h2>
        <p>
          WTP is computed as the ratio of each attribute’s coefficient to the negative cost coefficient. This reflects the monetary value respondents attach to each programme attribute.
        </p>
        <div class="buttons-row">
          <button onclick="renderWTPChart()">Show WTP Plots</button>
        </div>
        <div class="chart-grid">
          <div class="chart-box">
            <h3>WTP (A$) with Error Bars</h3>
            <canvas id="wtpChartMain"></canvas>
          </div>
        </div>
      </div>
    </section>

    <!-- Programme Uptake Probability Tab -->
    <section id="probTab" class="tabcontent">
      <div class="card">
        <h2>Programme Uptake Probability</h2>
        <p>
          Click “Show Probability Plot” to generate a chart based on your <strong>Inputs</strong>. Depending on the predicted uptake, you will receive suggestions for improving cost, accessibility, or frequency.
        </p>
        <div class="buttons-row">
          <button onclick="renderProbChart()">Show Probability Plot</button>
        </div>
        <div class="chart-grid">
          <div class="chart-box">
            <h3>Programme Uptake Probability</h3>
            <canvas id="probChartMain"></canvas>
          </div>
        </div>
      </div>
    </section>

    <!-- Costs & Benefits Tab -->
    <section id="costsTab" class="tabcontent">
      <div class="card">
        <h2>Costs &amp; Benefits</h2>
        <div id="costsBenefitsContainer">
          <div class="qaly-selector">
            <label for="qalySelect">Select QALY Gain Scenario:</label>
            <select id="qalySelect" onchange="renderCostsBenefits()">
              <option value="low">Low (0.02 QALYs per participant)</option>
              <option value="moderate" selected>Moderate (0.05 QALYs per participant)</option>
              <option value="high">High (0.1 QALYs per participant)</option>
            </select>
          </div>
          <div id="costsBenefitsResults"><!-- Results injected here --></div>
          <p class="reference">
            <strong>Reference:</strong> Engel, L., Lee, Y. Y., Le, L. K. D., Lal, A., &amp; Mihalopoulos, C. (2021). Reducing loneliness to prevent depression in older adults in Australia: A modelled cost-effectiveness analysis. Mental Health and Prevention, 24. <a href="https://doi.org/10.1016/j.mhp.2021.200212" target="_blank">https://doi.org/10.1016/j.mhp.2021.200212</a>.
          </p>
        </div>
      </div>
    </section>

    <!-- Scenarios Tab -->
    <section id="scenariosTab" class="tabcontent">
      <div class="card">
        <h2>Saved Scenarios</h2>
        <p>
          Save your scenario from <strong>Inputs</strong> and then compare or export multiple configurations (including cost-benefit charts) to PDF.
        </p>
        <div class="buttons-row">
          <button onclick="saveScenario()">Save Current Scenario</button>
          <button onclick="openComparison()">Compare All Scenarios</button>
          <button onclick="exportToPDF()">Export Comparison to PDF</button>
        </div>
        <table id="scenarioTable">
          <thead>
            <tr>
              <th>Name</th>
              <th>State</th>
              <th>Cost Adjust?</th>
              <th>Cost (AUD)</th>
              <th>Local?</th>
              <th>Wider?</th>
              <th>Weekly?</th>
              <th>Monthly?</th>
              <th>Virtual?</th>
              <th>Hybrid?</th>
              <th>2-Hour?</th>
              <th>4-Hour?</th>
              <th>Community?</th>
              <th>Counselling?</th>
              <th>VR?</th>
            </tr>
          </thead>
          <tbody></tbody>
        </table>
      </div>
    </section>

    <footer>
      <p>
        &copy; 2025 LonelyLessAustralia. All Rights Reserved. <br />
        Author: Mesfin Genie, Newcastle Business School, The University of Newcastle, Australia
      </p>
    </footer>
  </div>
  <script src="script.js"></script>
</body>
</html>
