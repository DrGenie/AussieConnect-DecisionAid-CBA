<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1.0" />
  <title>LonelyLessAustralia Decision Aid Tool</title>
  <link rel="stylesheet" href="styles.css" />
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" integrity="sha512-papNMzNnQn5iH+1G+FHu8SyuXHs6A1k+Ln7tK5qRo1l5eYm6Jzv+1pArJ7N4C9FfpRrmAgM3tYWd3FZ9jKz1Bw==" crossorigin="anonymous" referrerpolicy="no-referrer" />
  <!-- Chart.js Library -->
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <!-- jsPDF Library -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
</head>
<body>
  <div class="container">
    <header>
      <h1>LonelyLessAustralia Decision Aid Tool</h1>
    </header>

    <nav class="tabs" role="tablist">
      <button class="tablink active" role="tab" aria-selected="true" aria-controls="introTab" onclick="openTab('introTab', this)">
        <i class="fa-solid fa-info-circle"></i><span> Introduction</span>
      </button>
      <button class="tablink" role="tab" aria-selected="false" aria-controls="instructionsTab" onclick="openTab('instructionsTab', this)">
        <i class="fa-solid fa-circle-question"></i><span> Instructions</span>
      </button>
      <button class="tablink" role="tab" aria-selected="false" aria-controls="attributesTab" onclick="openTab('attributesTab', this)">
        <i class="fa-solid fa-list"></i><span> Attributes</span>
      </button>
      <button class="tablink" role="tab" aria-selected="false" aria-controls="inputsTab" onclick="openTab('inputsTab', this)">
        <i class="fa-solid fa-sliders"></i><span> Inputs</span>
      </button>
      <button class="tablink" role="tab" aria-selected="false" aria-controls="wtpTab" onclick="openTab('wtpTab', this)">
        <i class="fa-solid fa-chart-bar"></i><span> WTP Results</span>
      </button>
      <button class="tablink" role="tab" aria-selected="false" aria-controls="probTab" onclick="openTab('probTab', this)">
        <i class="fa-solid fa-chart-line"></i><span> Predicted Programme Uptake</span>
      </button>
      <button class="tablink" role="tab" aria-selected="false" aria-controls="costsTab" onclick="openTab('costsTab', this)">
        <i class="fa-solid fa-calculator"></i><span> Costs &amp; Benefits</span>
      </button>
      <button class="tablink" role="tab" aria-selected="false" aria-controls="scenariosTab" onclick="openTab('scenariosTab', this)">
        <i class="fa-solid fa-folder-open"></i><span> Scenarios</span>
      </button>
    </nav>

    <!-- Introduction Tab -->
    <section id="introTab" class="tabcontent" style="display: block;" tabindex="0">
      <div class="card intro-box">
        <p>
          Loneliness affects over 5 million Australians, particularly older adults, causing significant health and economic challenges. This tool uses discrete choice experiment estimates to predict programme uptake probabilities, enabling personalised services based on the attributes older adults value most.
        </p>
        <p>Use the tabs above to navigate the tool:</p>
        <ul>
          <li><strong>Instructions</strong> – Step-by-step guidance.</li>
          <li><strong>Attributes</strong> – Detailed explanation of programme features (hover over the icons for extra info).</li>
          <li><strong>Inputs</strong> – Configure your scenario parameters.</li>
          <li><strong>WTP Results</strong> – View charts showing willingness-to-pay estimates.</li>
          <li><strong>Predicted Programme Uptake</strong> – See the predicted participation probability based on your inputs.</li>
          <li><strong>Costs &amp; Benefits</strong> – Analyse detailed cost components, QALY-based benefits and interactive modelling assumptions.</li>
          <li><strong>Scenarios</strong> – Save, compare and export various configurations.</li>
        </ul>
      </div>
    </section>

    <!-- Instructions Tab -->
    <section id="instructionsTab" class="tabcontent" tabindex="0">
      <div class="card">
        <h2>How to Use This Tool</h2>
        <ol>
          <li>Review the <strong>Attributes</strong> tab to understand each programme feature. Hover over the icons to view extra information.</li>
          <li>Configure your scenario in the <strong>Inputs</strong> tab by selecting your state, cost adjustments, and delivery options.</li>
          <li>Click “Calculate &amp; View Results” to update charts and cost-benefit analysis.</li>
          <li>Examine the <strong>WTP Results</strong> tab to see how much monetary value respondents assign to each attribute.</li>
          <li>Check the <strong>Predicted Programme Uptake</strong> tab to view the predicted uptake probability and suggestions for improvements.</li>
          <li>Review the <strong>Costs &amp; Benefits</strong> tab for a detailed, interactive cost breakdown and educational summaries explaining key modelling assumptions.</li>
          <li>Save and compare different scenarios in the <strong>Scenarios</strong> tab or export the results to PDF.</li>
        </ol>
      </div>
    </section>

    <!-- Attributes Tab -->
    <section id="attributesTab" class="tabcontent" tabindex="0">
      <div class="card">
        <h2>Programme Attributes</h2>
        <p class="description">
          The following attributes determine how programmes are evaluated. Each feature is described in detail below:
        </p>
        <ul class="attribute-list">
          <li>
            <i class="fa-solid fa-dollar-sign tooltip" data-tooltip="The out-of-pocket fee (in AUD) participants must pay each time they attend."></i>
            <strong>Cost per session:</strong> The out-of-pocket fee (AUD) participants must pay each time they attend.
          </li>
          <li>
            <i class="fa-solid fa-location-dot tooltip" data-tooltip="Whether the programme is local (up to 12 km) or in a wider community (50+ km) affects mobility, transport cost, and convenience."></i>
            <strong>Accessibility:</strong> Determines if the programme is offered locally or in a wider community.
          </li>
          <li>
            <i class="fa-solid fa-calendar-check tooltip" data-tooltip="Weekly sessions promote more frequent social engagement compared to monthly sessions."></i>
            <strong>Frequency of Interaction:</strong> Weekly or monthly, influencing how often participants engage socially.
          </li>
          <li>
            <i class="fa-solid fa-video tooltip" data-tooltip="Virtual sessions are delivered online while hybrid sessions combine in-person and virtual formats."></i>
            <strong>Method of Interaction:</strong> Virtual or hybrid (in-person &amp; virtual), reflecting user preferences and technology access.
          </li>
          <li>
            <i class="fa-solid fa-clock tooltip" data-tooltip="Session duration affects both the depth of interactions and scheduling flexibility."></i>
            <strong>Duration of Each Interaction:</strong> 2-hour or 4-hour sessions, affecting the depth of interactions.
          </li>
          <li>
            <i class="fa-solid fa-hands-helping tooltip" data-tooltip="Support options include community engagement, psychological counselling, or VR-based sessions."></i>
            <strong>Type of Support Programme:</strong> Community engagement, psychological counselling, or VR-based sessions.
          </li>
        </ul>
      </div>
    </section>

    <!-- Inputs Tab -->
    <section id="inputsTab" class="tabcontent" tabindex="0">
      <div class="card">
        <h2>Programme Inputs</h2>
        <p>Set up your scenario and click “Calculate &amp; View Results” to see the outcomes.</p>
        <form onsubmit="event.preventDefault();">
          <div class="form-grid">
            <div class="form-item">
              <label for="state_select">State:</label>
              <select id="state_select">
                <option value="">None</option>
                <option value="NSW">New South Wales</option>
                <option value="VIC">Victoria</option>
                <option value="QLD">Queensland</option>
                <option value="WA">Western Australia</option>
                <option value="SA">South Australia</option>
                <option value="TAS">Tasmania</option>
                <option value="ACT">Australian Capital Territory</option>
                <option value="NT">Northern Territory</option>
              </select>
              <label for="adjustCosts">Adjust for Cost of Living?</label>
              <select id="adjustCosts">
                <option value="no">No</option>
                <option value="yes">Yes</option>
              </select>
            </div>
            <div class="form-item">
              <label for="costSlider">
                Cost per Session (AUD): <span id="costLabel">50</span>
              </label>
              <input type="range" id="costSlider" min="0" max="100" step="1" value="50" oninput="updateCostDisplay(this.value)" />
            </div>
            <div class="form-item">
              <label>
                <input type="checkbox" id="localCheck" /> Local Area (12 km)
              </label>
              <label>
                <input type="checkbox" id="widerCheck" /> Wider Community (50+ km)
              </label>
            </div>
            <div class="form-item">
              <label>
                <input type="checkbox" id="weeklyCheck" /> Weekly
              </label>
              <label>
                <input type="checkbox" id="monthlyCheck" /> Monthly
              </label>
            </div>
            <div class="form-item">
              <label>
                <input type="checkbox" id="virtualCheck" /> Virtual
              </label>
              <label>
                <input type="checkbox" id="hybridCheck" /> Hybrid (In-person &amp; Virtual)
              </label>
            </div>
            <div class="form-item">
              <label>
                <input type="checkbox" id="twoHCheck" /> 2-hour Session
              </label>
              <label>
                <input type="checkbox" id="fourHCheck" /> 4-hour Session
              </label>
            </div>
            <div class="form-item">
              <label>
                <input type="checkbox" id="commCheck" /> Community Engagement
              </label>
              <label>
                <input type="checkbox" id="psychCheck" /> Counselling
              </label>
              <label>
                <input type="checkbox" id="vrCheck" /> Virtual Reality
              </label>
            </div>
          </div>
          <div class="buttons-row">
            <button type="button" onclick="openSingleScenario()">Calculate &amp; View Results</button>
          </div>
        </form>
      </div>
    </section>

    <!-- WTP Results Tab -->
    <section id="wtpTab" class="tabcontent" tabindex="0">
      <div class="card">
        <h2>Willingness to Pay (WTP) Results</h2>
        <p>
          The willingness-to-pay (WTP) for each programme attribute is calculated by taking the ratio of the attribute’s coefficient to the negative of the cost coefficient. This metric quantifies the monetary value respondents place on each programme attribute, holding other factors constant.
        </p>
        <p>
          For example, among the programme types, community engagement is the most highly valued, with a WTP of A$14.47 (SE=3.31, p &lt; 0.001). This shows older adults are willing to pay an additional A$14.47 for community-based programmes, compared to the reference peer support scenario.
        </p>
        <div class="buttons-row">
          <button onclick="renderWTPChart()">Show WTP Charts</button>
        </div>
        <div class="chart-grid">
          <div class="chart-box">
            <h3>WTP (A$)</h3>
            <canvas id="wtpChartMain"></canvas>
          </div>
        </div>
      </div>
    </section>

    <!-- Predicted Programme Uptake Tab -->
    <section id="probTab" class="tabcontent" tabindex="0">
      <div class="card">
        <h2>Predicted Programme Uptake</h2>
        <p>
          Click “Show Probability Plot” to generate a new bar chart based on your Inputs. The chart displays the predicted uptake as a percentage. If the predicted uptake is below 30%, between 30–70%, or above 70%, the tool provides intuitive suggestions for adjusting programme cost, improving accessibility, or increasing interaction frequency to better meet user needs.
        </p>
        <div class="buttons-row">
          <button onclick="renderProbChart()">Show Probability Plot</button>
        </div>
        <div class="chart-grid">
          <div class="chart-box">
            <h3>Uptake Probability</h3>
            <canvas id="probChartMain"></canvas>
          </div>
        </div>
      </div>
    </section>

    <!-- Costs & Benefits Tab -->
    <section id="costsTab" class="tabcontent" tabindex="0">
      <div class="card">
        <h2>Costs &amp; Benefits Analysis</h2>
        <div id="costsBenefitsContainer">
          <div class="qaly-selector">
            <label for="qalySelect">Select QALY Gain Scenario:</label>
            <select id="qalySelect" onchange="renderCostsBenefits()">
              <option value="low">Low (0.02 QALYs)</option>
              <option value="moderate" selected>Moderate (0.05 QALYs)</option>
              <option value="high">High (0.1 QALYs)</option>
            </select>
          </div>
          <div id="costsBenefitsResults">
            <!-- Detailed cost-benefit analysis, interactive cost sliders, pop-up info boxes and educational summaries will be rendered here -->
          </div>
          <div class="modelling-assumptions">
            <h3><i class="fa-solid fa-lightbulb"></i> Modelling Assumptions</h3>
            <p>
              Our analysis incorporates interactive cost sliders to adjust key parameters, pop-up information boxes that provide detailed explanations, and educational summaries that clarify the assumptions behind cost components and QALY-based benefits. Hover over the <i class="fa-solid fa-info-circle tooltip" data-tooltip="This provides more detailed information on our modelling assumptions."></i> icon for further details.
            </p>
          </div>
          <div class="cost-icons">
            <div class="icon-item" tabindex="0">
              <i class="fa-solid fa-receipt"></i>
              <span>Detailed Cost Breakdown</span>
            </div>
            <div class="icon-item" tabindex="0">
              <i class="fa-solid fa-hand-holding-dollar"></i>
              <span>QALY-Based Benefits</span>
            </div>
          </div>
          <p class="reference">
            <strong>Reference:</strong> Engel et al. (2021). Reducing loneliness to prevent depression in older adults in Australia: A modelled cost-effectiveness analysis. <a href="https://doi.org/10.1016/j.mhp.2021.200212" target="_blank">View Study</a>.
          </p>
        </div>
      </div>
    </section>

    <!-- Scenarios Tab -->
    <section id="scenariosTab" class="tabcontent" tabindex="0">
      <div class="card">
        <h2>Saved Scenarios</h2>
        <p>
          Save your current scenario from the Inputs tab. Compare multiple scenarios or export them to PDF.
        </p>
        <div class="buttons-row">
          <button onclick="saveScenario()">Save Current Scenario</button>
          <button onclick="openComparison()">Compare Scenarios</button>
          <button onclick="exportToPDF()">Export to PDF</button>
        </div>
        <table id="scenarioTable">
          <thead>
            <tr>
              <th>Name</th>
              <th>State</th>
              <th>Cost Adjust?</th>
              <th>Cost (AUD)</th>
              <th>Local?</th>
              <th>Wider?</th>
              <th>Weekly?</th>
              <th>Monthly?</th>
              <th>Virtual?</th>
              <th>Hybrid?</th>
              <th>2-Hour?</th>
              <th>4-Hour?</th>
              <th>Community?</th>
              <th>Counselling?</th>
              <th>VR?</th>
            </tr>
          </thead>
          <tbody></tbody>
        </table>
      </div>
    </section>

    <footer>
      <p>
        &copy; 2025 LonelyLessAustralia. All Rights Reserved.<br />
        Mesfin Genie, Newcastle Business School, The University of Newcastle, Australia
      </p>
    </footer>
  </div>
  <script src="script.js"></script>
</body>
</html>
