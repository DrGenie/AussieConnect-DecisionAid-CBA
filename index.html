<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1.0" />
  <title>LonelyLessAustralia Decision Aid Tool</title>
  <link rel="stylesheet" href="styles.css" />
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" integrity="sha512-papNMzNnQn5iH+1G+FHu8SyuXHs6A1k+Ln7tK5qRo1l5eYm6Jzv+1pArJ7N4C9FfpRrmAgM3tYWd3FZ9jKz1Bw==" crossorigin="anonymous" referrerpolicy="no-referrer" />
  <!-- Chart.js Library -->
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <!-- jsPDF Library -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
</head>
<body>
  <div class="container">
    <header>
      <h1>LonelyLessAustralia Decision Aid Tool</h1>
    </header>

    <nav class="tabs" role="tablist">
      <button class="tablink active" role="tab" aria-selected="true" aria-controls="introTab" onclick="openTab('introTab', this)">
        <i class="fa-solid fa-info-circle"></i><span> Introduction</span>
      </button>
      <button class="tablink" role="tab" aria-selected="false" aria-controls="instructionsTab" onclick="openTab('instructionsTab', this)">
        <i class="fa-solid fa-circle-question"></i><span> Instructions</span>
      </button>
      <button class="tablink" role="tab" aria-selected="false" aria-controls="attributesTab" onclick="openTab('attributesTab', this)">
        <i class="fa-solid fa-list"></i><span> Attributes</span>
      </button>
      <button class="tablink" role="tab" aria-selected="false" aria-controls="inputsTab" onclick="openTab('inputsTab', this)">
        <i class="fa-solid fa-sliders"></i><span> Inputs</span>
      </button>
      <button class="tablink" role="tab" aria-selected="false" aria-controls="wtpTab" onclick="openTab('wtpTab', this)">
        <i class="fa-solid fa-chart-bar"></i><span> WTP Results</span>
      </button>
      <button class="tablink" role="tab" aria-selected="false" aria-controls="probTab" onclick="openTab('probTab', this)">
        <i class="fa-solid fa-chart-line"></i><span> Uptake</span>
      </button>
      <button class="tablink" role="tab" aria-selected="false" aria-controls="costsTab" onclick="openTab('costsTab', this)">
        <i class="fa-solid fa-calculator"></i><span> Costs & Benefits</span>
      </button>
      <button class="tablink" role="tab" aria-selected="false" aria-controls="scenariosTab" onclick="openTab('scenariosTab', this)">
        <i class="fa-solid fa-folder-open"></i><span> Scenarios</span>
      </button>
    </nav>

    <!-- Introduction Tab -->
    <section id="introTab" class="tabcontent" style="display: block;" tabindex="0">
      <div class="card intro-box">
        <p>
          Loneliness affects over five million Australians, particularly older adults, causing significant health and economic challenges. This tool uses discrete choice experiment estimates to predict programme uptake probabilities, enabling personalized services based on the attributes older adults value most.
        </p>
        <p>Navigate using the tabs above:</p>
        <ul>
          <li><strong>Instructions</strong> – Step-by-step guidance.</li>
          <li><strong>Attributes</strong> – Detailed descriptions (hover over icons for info).</li>
          <li><strong>Inputs</strong> – Configure cost, accessibility, frequency, etc.</li>
          <li><strong>WTP Results</strong> – View charts of willingness to pay (A$) with error bars.</li>
          <li><strong>Uptake</strong> – See predicted programme uptake probability.</li>
          <li><strong>Costs & Benefits</strong> – Analyze cost components and benefits.</li>
          <li><strong>Scenarios</strong> – Save, compare, or export configurations.</li>
        </ul>
      </div>
    </section>

    <!-- Instructions Tab -->
    <section id="instructionsTab" class="tabcontent" tabindex="0">
      <div class="card">
        <h2>How to Use This Tool</h2>
        <ol>
          <li>Review <strong>Attributes</strong> to understand the key factors (hover on icons for more details).</li>
          <li>Configure your scenario in <strong>Inputs</strong> by selecting your state, cost adjustments, and service options.</li>
          <li>Click “Calculate &amp; View Results” to update charts and analysis.</li>
          <li>Examine <strong>WTP Results</strong> for attribute value insights.</li>
          <li>Check the <strong>Uptake</strong> tab for predicted participation probabilities.</li>
          <li>View detailed cost breakdowns and benefits in <strong>Costs & Benefits</strong>.</li>
          <li>Save and compare multiple scenarios in <strong>Scenarios</strong> or export them to PDF.</li>
        </ol>
      </div>
    </section>

    <!-- Attributes Tab -->
    <section id="attributesTab" class="tabcontent" tabindex="0">
      <div class="card">
        <h2>Programme Attributes</h2>
        <ul class="attribute-list">
          <li>
            <i class="fa-solid fa-dollar-sign tooltip" data-tooltip="The fee (in AUD) paid per session by participants."></i>
            <strong>Cost per session:</strong> Out-of-pocket fee.
          </li>
          <li>
            <i class="fa-solid fa-location-dot tooltip" data-tooltip="Local (up to 12 km) versus wider community (50+ km) impacts accessibility."></i>
            <strong>Accessibility:</strong> Local vs. wider community.
          </li>
          <li>
            <i class="fa-solid fa-calendar-alt tooltip" data-tooltip="Frequency of sessions: weekly boosts engagement compared to monthly."></i>
            <strong>Frequency:</strong> Weekly or monthly sessions.
          </li>
          <li>
            <i class="fa-solid fa-video tooltip" data-tooltip="Delivery mode: choose between virtual or hybrid approaches."></i>
            <strong>Method:</strong> Virtual or hybrid.
          </li>
          <li>
            <i class="fa-solid fa-clock tooltip" data-tooltip="Session length affects scheduling and interaction depth."></i>
            <strong>Duration:</strong> 2-hour or 4-hour sessions.
          </li>
          <li>
            <i class="fa-solid fa-hands-helping tooltip" data-tooltip="Select the support programme that best fits: community, counselling, or virtual reality."></i>
            <strong>Support Type:</strong> Community, counselling, or VR.
          </li>
        </ul>
      </div>
    </section>

    <!-- Inputs Tab -->
    <section id="inputsTab" class="tabcontent" tabindex="0">
      <div class="card">
        <h2>Programme Inputs</h2>
        <p>Set up your scenario then click “Calculate &amp; View Results”.</p>
        <form onsubmit="event.preventDefault();">
          <div class="form-grid">
            <div class="form-item">
              <label for="state_select">State:</label>
              <select id="state_select">
                <option value="">None</option>
                <option value="NSW">New South Wales</option>
                <option value="VIC">Victoria</option>
                <option value="QLD">Queensland</option>
                <option value="WA">Western Australia</option>
                <option value="SA">South Australia</option>
                <option value="TAS">Tasmania</option>
                <option value="ACT">Australian Capital Territory</option>
                <option value="NT">Northern Territory</option>
              </select>
              <label for="adjustCosts">Adjust for Cost of Living?</label>
              <select id="adjustCosts">
                <option value="no">No</option>
                <option value="yes">Yes</option>
              </select>
            </div>
            <div class="form-item">
              <label for="costSlider">
                Cost per Session (AUD): <span id="costLabel">50</span>
              </label>
              <input type="range" id="costSlider" min="0" max="100" step="1" value="50" oninput="updateCostDisplay(this.value)" />
            </div>
            <div class="form-item">
              <label>
                <input type="checkbox" id="localCheck" /> Local Area (12 km)
              </label>
              <label>
                <input type="checkbox" id="widerCheck" /> Wider Community (50+ km)
              </label>
            </div>
            <div class="form-item">
              <label>
                <input type="checkbox" id="weeklyCheck" /> Weekly
              </label>
              <label>
                <input type="checkbox" id="monthlyCheck" /> Monthly
              </label>
            </div>
            <div class="form-item">
              <label>
                <input type="checkbox" id="virtualCheck" /> Virtual
              </label>
              <label>
                <input type="checkbox" id="hybridCheck" /> Hybrid
              </label>
            </div>
            <div class="form-item">
              <label>
                <input type="checkbox" id="twoHCheck" /> 2-hour Session
              </label>
              <label>
                <input type="checkbox" id="fourHCheck" /> 4-hour Session
              </label>
            </div>
            <div class="form-item">
              <label>
                <input type="checkbox" id="commCheck" /> Community Engagement
              </label>
              <label>
                <input type="checkbox" id="psychCheck" /> Counselling
              </label>
              <label>
                <input type="checkbox" id="vrCheck" /> Virtual Reality
              </label>
            </div>
          </div>
          <div class="buttons-row">
            <button type="button" onclick="openSingleScenario()">Calculate &amp; View Results</button>
          </div>
        </form>
      </div>
    </section>

    <!-- WTP Results Tab -->
    <section id="wtpTab" class="tabcontent" tabindex="0">
      <div class="card">
        <h2>Willingness to Pay (WTP) Results</h2>
        <p>
          WTP is derived from the ratio of each attribute’s coefficient to the negative cost coefficient, reflecting the monetary value assigned by respondents.
        </p>
        <div class="buttons-row">
          <button onclick="renderWTPChart()">Show WTP Charts</button>
        </div>
        <div class="chart-grid">
          <div class="chart-box">
            <h3>WTP with Error Bars (A$)</h3>
            <canvas id="wtpChartMain"></canvas>
          </div>
        </div>
      </div>
    </section>

    <!-- Programme Uptake Tab -->
    <section id="probTab" class="tabcontent" tabindex="0">
      <div class="card">
        <h2>Programme Uptake Probability</h2>
        <p>
          Click “Show Probability Plot” to generate an updated chart based on your inputs. Adjustments to cost, accessibility, or frequency are suggested based on the result.
        </p>
        <div class="buttons-row">
          <button onclick="renderProbChart()">Show Probability Plot</button>
        </div>
        <div class="chart-grid">
          <div class="chart-box">
            <h3>Uptake Probability</h3>
            <canvas id="probChartMain"></canvas>
          </div>
        </div>
      </div>
    </section>

    <!-- Costs & Benefits Tab -->
    <section id="costsTab" class="tabcontent" tabindex="0">
      <div class="card">
        <h2>Costs &amp; Benefits</h2>
        <div id="costsBenefitsContainer">
          <div class="qaly-selector">
            <label for="qalySelect">Select QALY Gain Scenario:</label>
            <select id="qalySelect" onchange="renderCostsBenefits()">
              <option value="low">Low (0.02 QALYs)</option>
              <option value="moderate" selected>Moderate (0.05 QALYs)</option>
              <option value="high">High (0.1 QALYs)</option>
            </select>
          </div>
          <div id="costsBenefitsResults"></div>
          <p class="reference">
            <strong>Reference:</strong> Engel et al. (2021). Reducing loneliness to prevent depression in older adults in Australia: A modelled cost-effectiveness analysis. <a href="https://doi.org/10.1016/j.mhp.2021.200212" target="_blank">View Study</a>.
          </p>
        </div>
      </div>
    </section>

    <!-- Scenarios Tab -->
    <section id="scenariosTab" class="tabcontent" tabindex="0">
      <div class="card">
        <h2>Saved Scenarios</h2>
        <p>
          Save your current scenario from the Inputs tab. Compare multiple scenarios or export them to PDF.
        </p>
        <div class="buttons-row">
          <button onclick="saveScenario()">Save Current Scenario</button>
          <button onclick="openComparison()">Compare Scenarios</button>
          <button onclick="exportToPDF()">Export to PDF</button>
        </div>
        <table id="scenarioTable">
          <thead>
            <tr>
              <th>Name</th>
              <th>State</th>
              <th>Cost Adjust?</th>
              <th>Cost (AUD)</th>
              <th>Local?</th>
              <th>Wider?</th>
              <th>Weekly?</th>
              <th>Monthly?</th>
              <th>Virtual?</th>
              <th>Hybrid?</th>
              <th>2-Hour?</th>
              <th>4-Hour?</th>
              <th>Community?</th>
              <th>Counselling?</th>
              <th>VR?</th>
            </tr>
          </thead>
          <tbody></tbody>
        </table>
      </div>
    </section>

    <footer>
      <p>&copy; 2025 LonelyLessAustralia. All Rights Reserved.<br />Mesfin Genie, Newcastle Business School, The University of Newcastle, Australia</p>
    </footer>
  </div>
  <script src="script.js"></script>
</body>
</html>
